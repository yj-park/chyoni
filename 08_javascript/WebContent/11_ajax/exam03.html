<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="../framework-t.js"></script>
</head>
<body>
	<h1>Ajax 통신으로 서버에서 받은 메세지</h1>
	<!-- hello.jsp 결과를 div에 찍을거야 -->
	<div id="result"></div>
	<br>
	<button>Ajax 호출</button>
	<script>
		$("button").on("click", function () {
			var xhr = new XMLHttpRequest();
			
			// 이벤트는 거의 on이 붙어있어. readystate가 변할 때마다 함수 호출
			xhr.onreadystatechange = function () {
				
				switch (xhr.readyState) {
				
				// 브라우저에 따라서 값이 변경될 수 있음!
				case 1:
					console.log("1번 들어옴");
					break;
				case 2:
					console.log("2번 들어옴");
					break;
				case 3:
					console.log("3번 들어옴");
					break;
				case 4:
					console.log("4번 들어옴");
					if (xhr.status == 200) {
						console.log("정상 수행");
					} else {
						console.log("비정상 수행");
						console.log("오류코드 : " + xhr.status);
						console.log("오류메세지 : " + xhr.statusText);
					}
					break;
				}
			};
			
			xhr.open("GET", "exam0ㄷ2", true);
			xhr.send();
			// send()에서 post방식일 때 파라미터 설정 처리한다
		});
	</script>
</body>
</html>